function updateRoster(e,t){document.getElementById("overTheCap").style.display=t>2e5?"block":"none",document.getElementById("diagram").innerHTML="",document.getElementById("gridCont").innerHTML="",document.getElementById("gridLowerCont").innerHTML="";var l=0,n=[];for(let t=0,a=e[0];t<e.length;a=e[++t]){a.id&&n.push(a.id);let e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x",`${l}%`),e.setAttribute("width",`${a.perc}%`),e.setAttribute("height",150),e.setAttribute("fill",a.color),e.onmouseover=function(){showGridPage(t)},document.getElementById("diagram").append(e),l+=a.perc;let o=buildElem("DIV","gridPage",void 0,document.getElementById("gridCont"));0==t&&(o.style.display="grid"),buildElem("DIV","gridCell",void 0,o).innerHTML=a.name,"player"==a.type?buildElem("DIV","gridCell","Cap Hit:",o):buildElem("DIV","gridCell","Amount:",o),buildElem("DIV","gridCell",a.render,o),buildElem("DIV","gridCell","Percent:",o),buildElem("DIV","gridCell",`${a.frac.toFixed(2)}%`,o),"player"==a.type&&(buildElem("DIV","gridCell","Base:",o),buildElem("DIV","gridCell",a.renderBase,o),buildElem("DIV","gridCell","Guaranteed:",o),buildElem("DIV","gridCell",a.renderGuar,o),renderPlayerRow(a,document.getElementById("gridLowerCont"),!0))}for(let e in offPlays)for(let t in offPlays[e])["name","wr1r","wr2r","ter","type","cases","first","second","third"].includes(offPlays[e][t])||n.includes(offPlays[e][t])||(offPlays[e][t]="");for(let e in defPlays)for(let t in defPlays[e])["name","wr1r","wr2r","ter","type","cases","first","second","third"].includes(defPlays[e][t])||n.includes(defPlays[e][t])||(defPlays[e][t]="");for(let e of document.getElementsByClassName("playerSel"))n.includes(e.value)||(e.value="none")}function changePosition(e){let t=["A","B","C","D"];for(let l=0;l<4;l++)document.getElementById(`sel${t[l]}`).placeholder=attrs[e][l].ln,document.getElementById(`sel${t[l]}`).value=""}function search(){let e={method:"search"},t=["selPos","selTeam","selDraft","selId","selA","selB","selC","selD","selName","selBase","selGuar"],l=["pos","team","draftable","id","a","b","c","d","name","base","guar"];for(let n=0,a=t[0],o=l[0];n<t.length;a=t[++n],o=l[n]){let t=document.getElementById(a).value;""!=t&&(e[o]=t)}ws.mail(e)}function renderSearch(e,t,l){document.getElementById("searchCont").innerHTML="";for(let n of e)renderPlayerRow(n,document.getElementById("searchCont"),!1,t,l)}function sort(){for(let e of document.getElementsByClassName("sortRow")){if(document.getElementById("selPos").value!=e.getAttribute("data-pos")){e.style.display="none";continue}if(document.getElementById("selTeam").value!=e.getAttribute("data-team")&&"ALL"!=document.getElementById("selTeam").value){e.style.display="none";continue}if(Number(document.getElementById("selBase").value)<Number(e.getAttribute("data-base"))&&""!=document.getElementById("selBase").value){e.style.display="none";continue}if(Number(document.getElementById("selGuar").value)<Number(e.getAttribute("data-guar"))&&""!=document.getElementById("selGuar").value){e.style.display="none";continue}if(document.getElementById("selDraft").value!=e.getAttribute("data-able")&&"ANY"!=document.getElementById("selDraft").value){e.style.display="none";continue}if(-1==e.getAttribute("data-id").toLowerCase().indexOf(document.getElementById("selId").value.toLowerCase())){e.style.display="none";continue}if(-1==e.getAttribute("data-name").toLowerCase().indexOf(document.getElementById("selName").value.toLowerCase())){e.style.display="none";continue}let t=!0,l=attrs[document.getElementById("selPos").value],n=[Number(e.getAttribute("data-stat1")),Number(e.getAttribute("data-stat2")),Number(e.getAttribute("data-stat3")),Number(e.getAttribute("data-stat4"))],a=[Number(document.getElementById("selA").value),Number(document.getElementById("selB").value),Number(document.getElementById("selC").value),Number(document.getElementById("selD").value)];for(let o=0,r=l[0],d=n[0],s=a[0];o<l.length;r=l[++o],d=n[o],s=a[o])if(0!=s&&(r.flip&&(d=-d,s=-s),d<s)){t=!1,e.style.display="none";break}t&&(e.style.display="block")}}function inquire(e){var t=e.parentElement.parentElement.parentElement,l=t.getAttribute("data-team"),n=t.getAttribute("data-id"),a=t.getAttribute("data-name"),o=t.getAttribute("data-pos");document.getElementById("sortPage").style.display="none",document.getElementById("chatCont").style.display="block",document.getElementById("sortBtn").style.textDecoration="none",document.getElementById("chatBtn").style.textDecoration="underline",showChat(l),document.getElementById("chatBox").value=`I wanted to talk to you about ${a} (${o} #${n}).`}function offerPlayerTrade(e){var t=e.parentElement.parentElement.parentElement.getAttribute("data-team");getAssets(t),document.getElementById("tradeSel").value=t,document.getElementById("sortPage").style.display="none",document.getElementById("tradeCont").style.display="block",document.getElementById("sortBtn").style.textDecoration="none",document.getElementById("tradeBtn").style.textDecoration="underline",makeTrade()}function updatePlayer(e){if(contract.id==e.id&&"UFA"!=e.id&&e.team!=document.body.getAttribute("data-abbr")&&error(`This player was just taken by the ${getAttrFromAbbr("mascot",e.team)}`),document.getElementById(`player${e.id}`)){let t=document.getElementById(`player${e.id}`);t.children[0].innerHTML=`<img src="logos/${e.clean}_g.png"> ${e.fName} ${e.lName}&nbsp;<span class="num">(${e.pos} #${e.id})</span>&nbsp;${decodeEntities("&middot;")}&nbsp;${e.mascot}`;let l=t.querySelector(".playerBot");l.children[23].textContent=e.renderBase,l.children[25].textContent=e.renderGuar,l.children[27].textContent=e.renderSalary,l.children[29].textContent=e.ws,l.children[37].textContent=e.mascot}e.team==document.body.getAttribute("data-abbr")&&renderPlayerRow(e,document.getElementById("gridLowerCont"),!0)}ws.onmessage=(e=>{var t=JSON.parse(e.data);if("error"==t.method)"505"==t.type?location.reload():["changePass","verifyEmail","verifyCode","enable2fa","verify2fa","removeEmail","removeFactor"].includes(t.type)?custom(t.text,t.type,t.good):error(t.text);else if("tradeOffered"==t.method)t.to==document.body.getAttribute("data-abbr")&&error("You have a new trade offer!"),newTrade=t.trade,renderTrade(t.trade);else if("tradeUpdate"==t.method)updateTrade(t);else if("gottenChannel"==t.method)loadChannel(t.chats);else if("postedMessage"==t.method)newMessage(t);else if("gottenDelegates"==t.method)if(t.solo)for(let e of t.dele)updateDelegate(e);else loadDelegates(t.gamesLeft,t.dele);else if("gottenOffense"==t.method||"gottenDefense"==t.method)"gottenOffense"==t.method?0==t.num&&(offPlays[t.playId]=t.play,"pass"==t.play.type?toPass(t.play):(fromPass(),ctx.clearRect(0,0,document.getElementById("routeCanvas").width,document.getElementById("routeCanvas").height))):1==t.num&&(defPlays[t.playId]=t.play),loadPlayPage(t.play,t.num,t.roster);else if("searched"==t.method)renderSearch(t.matches,t.canTrade,t.canSign);else if("updateDelegate"==t.method)updateDelegate(t.delegate);else if("negotiated"==t.method){document.getElementById("callAni").style.display="none",document.getElementById("callResult").style.display="block",t.success?document.getElementById("callResult").textContent="Negotiation Sucessful":document.getElementById("callResult").textContent="Negotiation Unsucessful";for(let e of t.deles)updateDelegate(e);setTimeout(()=>{document.getElementById("negoCont").style.display="none"},1500)}else if("updatePlayer"==t.method)updatePlayer(t.player);else if("gottenFullRoster"==t.method)fullRoster=t.players;else if("signOut"==t.method)signOut();else if("qr"==t.method)document.getElementById("factorCodeCont").style.display="flex",document.getElementById("qrCont").style.display="flex",document.getElementById("qrCode").src=t.data;else if("gottenCodes"==t.method){let e=document.getElementsByClassName("codeCell");for(let l=0;l<e.length;l++)e[l].style.display="block",e[l].textContent=t.codes[l]}else"gottenAssets"==t.method?handleAssets(t):"brokenDown"==t.method&&updateRoster(t.breakdown,t.spending)}),window.onload=(()=>{ctx=document.getElementById("routeCanvas").getContext("2d"),document.getElementById("chatMain")&&document.getElementById("chatMain").addEventListener("keydown",function(e){var t=window.event?event:e;13==t.keyCode&&t.ctrlKey&&post()}),setInterval(()=>{ws.mail({method:"getDelegates",solo:!0})},6e4)}),ws.onopen=(()=>{ws.mail({method:"connectAsTeam",needed:!0})});var contract={},callAni=!1;function negotiate(e){ws.mail({method:"getDelegates"});let t=e.parentElement.parentElement.parentElement;if("1"==t.getAttribute("data-able"))return error("You cannot negotiate with a draftable player");document.body.style.overflowY="hidden",document.getElementById("negoCont").style.display="flex",document.getElementById("negoCont").children[0].style.display="block",document.getElementById("negoCont").children[1].style.display="none",document.getElementById("negoName").innerHTML=`${t.getAttribute("data-name")} <span class="num">(${t.getAttribute("data-pos")} #${t.getAttribute("data-id")})</span>`;let l=document.getElementById("negoContract");contract.oldBase=Number(t.getAttribute("data-base")),contract.oldGuar=Number(t.getAttribute("data-guar")),contract.oldDura=Number(t.getAttribute("data-dura")),contract.newBase=Number(t.getAttribute("data-base")),contract.newGuar=Number(t.getAttribute("data-guar")),contract.newDura=Number(t.getAttribute("data-dura")),contract.ego=Number(t.getAttribute("data-ego")),contract.id=t.getAttribute("data-id"),l.children[3].textContent=renderAmount(contract.oldBase),l.children[5].children[0].value=contract.oldBase,l.children[6].textContent=renderAmount(contract.oldGuar),l.children[8].children[0].value=contract.oldGuar,l.children[9].textContent=contract.oldDura;let n=contract.oldDura*contract.oldBase;l.children[12].textContent=renderAmount(contract.oldGuar+n),l.children[15].textContent=renderAmount(1.5*contract.oldGuar+n)}function loadDelegates(e,t){document.getElementById("negoContract").children[11].textContent=e;for(let e=0;e<20;e++){let l=document.getElementById(`negoDele${e}`),n=t[e];l.setAttribute("data-level",n.level),l.querySelector(".deleDesc").textContent=`Agent #${e+1} (Level ${n.level})`,n.frozen?(l.style.display="none",l.querySelector("input").checked=!1):l.style.display="flex"}updateContract()}function updateContract(){contract.newDura=Number(document.getElementById("negoLeft").textContent),contract.newBase=Number(document.getElementById("negoBase").value),contract.newGuar=Number(document.getElementById("negoGuar").value),contract.newGuar<contract.oldGuar&&setTimeout(()=>{Number(document.getElementById("negoGuar").value)<contract.oldGuar&&error("You cannot negotiate for less guaranteed money")},300),contract.newBase<25&&setTimeout(()=>{Number(document.getElementById("negoBase").value)<25&&error("You must pay players at least $25K per week")},300);let e=document.getElementById("negoContract"),t=contract.newBase*contract.newDura+1.5*contract.newGuar;e.children[14].textContent=renderAmount(contract.newBase*contract.newDura+contract.newGuar),e.children[17].textContent=renderAmount(t),e.children[19].textContent=renderAmount((contract.oldDura-contract.newDura)*contract.oldBase);let l=objDifficulty(contract);l<=0?(e.children[21].textContent="0.00",updateChance(0)):(e.children[21].textContent=l.toFixed(2),updateChance(l))}function updateChance(e){if(null==e&&(e=objDifficulty(contract)),0==e)document.getElementById("negoChancePerc").textContent="100%";else{let t=0;for(let e of document.getElementsByClassName("negoCheck"))e.children[1].checked&&(t+=power(Number(e.parentElement.getAttribute("data-level"))));let l=t/e*100;l=l>100?100:l,document.getElementById("negoChancePerc").textContent=`${l.toFixed(2)}%`}}function objDifficulty(e){return difficulty(e.oldBase,e.oldGuar,e.oldDura,e.newBase,e.newGuar,e.newDura,e.ego)}function difficulty(e,t,l,n,a,o,r){let d=e*l+1.5*t,s=n*o+1.5*a,i=2*(d**2*(Math.log(r)+1.1)/s**2)+3*((d-s)/1e5);return e==n&&t==a&&(i/=5),i}function closeNego(){document.getElementById("negoCont").style.display="none",document.body.style.overflowY="auto"}function startNego(){let e={method:"negotiate"};e.id=contract.id,e.contract={base:contract.newBase,guar:contract.newGuar,dura:contract.newDura},e.deles=[];for(let t=0;t<20;t++)document.getElementById(`negoDele${t}`).querySelector("input").checked&&e.deles.push(t);if(0==e.deles.length)return error("You must select at least one agent");ws.mail(e),document.getElementById("negoCont").children[0].style.display="none",document.getElementById("negoCont").children[1].style.display="block",!1!==callAni&&clearInterval(callAni);let t=0;document.getElementById("callAni").style.display="block",document.getElementById("callResult").style.display="none",callAni=setInterval(()=>{for(let e=0;e<5;e++){document.getElementById("callAni").children[0].children[e].style.top=`${16*Math.cos(1.5*Math.PI*e-t)+32}px`}t+=.2},50)}function release(e){ws.mail({method:"releasePlayer",id:e.parentElement.parentElement.parentElement.getAttribute("data-id")})}var fullRoster,currOffPlay,currDefPlay,offPlays={},defPlays={};function getOffense(e){let t=document.getElementById("defPlaySelect").value;if(""==t)return error("You must choose a play to load an offense");ws.mail({method:"getOffense",abbr:e,play:t,num:1})}function changeDefPlay(e){if(fullRoster||ws.mail({method:"getFullRoster"}),defPlays[currDefPlay=e]){let e=[];for(let t of fullRoster)e.push(t.id);return void loadPlayPage(defPlays[currDefPlay],1,e)}ws.mail({method:"getDefense",abbr:document.body.getAttribute("data-abbr"),play:e,num:1});let t=document.getElementById("defTeamSelect").value;""!=t&&ws.mail({method:"getDefense",abbr:t,play:e,num:1})}function getDefense(e){let t=document.getElementById("offPlaySelect").value;if(""==t)return error("You must choose a play to load a defense");ws.mail({method:"getDefense",abbr:e,play:t,num:0})}function changeOffPlay(e){if(fullRoster||ws.mail({method:"getFullRoster"}),offPlays[currOffPlay=e]){let e=[];for(let t of fullRoster)e.push(t.id);return loadPlayPage(offPlays[currOffPlay],0,e),void("pass"==offPlays[currOffPlay].type?toPass(offPlays[currOffPlay]):fromPass())}ws.mail({method:"getOffense",abbr:document.body.getAttribute("data-abbr"),play:e,num:0});let t=document.getElementById("offTeamSelect").value;""!=t&&ws.mail({method:"getDefense",abbr:t,play:e,num:0})}function loadPlayPage(e,t,l){l.sort(),console.log(e);for(let n in e){if(["name","wr1r","wr2r","ter","type","cases","first","second","third"].includes(n))continue;let a=document.getElementById(`${n}Cell${t}`).children[0],o=getAttrFromAbbr("clean",document.body.getAttribute("data-abbr"));["qb","rb","wr1","wr2","te","ol1","ol2"].includes(n)&&1==t?o=getAttrFromAbbr("clean",document.getElementById("defTeamSelect").value):["qb","rb","wr1","wr2","te","ol1","ol2"].includes(n)||0!=t||(o=getAttrFromAbbr("clean",document.getElementById("offTeamSelect").value)),updatePlayerCell(a,e[n],o,l)}}function updatePlayerCell(e,t,l,n){if(e.parentElement.classList.remove("dis"),e.parentElement.classList.remove("ovr"),l&&(e.className=l),e.children[0].textContent=`${t.fName.charAt(0)}. ${t.lName}`,"SELECT"==e.children[1].nodeName&&n){for(;e.children[1].children.length>1;)e.children[1].lastChild.remove();for(let l of matchingPos(t.id,n)){let n=document.createElement("OPTION");n.textContent=`#${l}`,n.value=l,t.id==l&&(n.selected=!0),e.children[1].append(n)}}else"DIV"==e.children[1].nodeName&&(e.children[1].textContent=`#${t.id}`);e.children[2].textContent=t.pos;let a=e.parentElement.querySelectorAll(".ranking");e.parentElement.setAttribute("data-id",t.id);for(let e=0;e<4;e++){let l=t[`stat${e+1}`];a[e].className=`ranking alt ${l.r.cls}`,a[e].textContent=l.r.abbr,a[e].title=l.r.name,a[e].parentElement.previousElementSibling.textContent=l.m,a[e].parentElement.previousElementSibling.previousElementSibling.innerHTML=l.h}}function preventConflict(e){updatePlayerCell(e.parentElement,getPlayer(e.value),void 0,void 0);let t=e.parentElement.parentElement.id;if(t=t.substring(0,t.length-5),e.classList.contains("off")){var l=document.querySelectorAll("select.playerSel.off");offPlays[currOffPlay][t]=getPlayer(e.value)}else{l=document.querySelectorAll("select.playerSel.def");defPlays[currDefPlay][t]=getPlayer(e.value)}for(let t of l)if(t.value==e.value&&t!=e){t.selectedIndex=0,t.parentElement.parentElement.classList.add("dis","ovr"),t.previousElementSibling.textContent="None";let l=t.parentElement.parentElement.id;l=l.substring(0,l.length-5),e.classList.contains("off")?offPlays[currOffPlay][l]="":defPlays[currDefPlay][l]=""}}function changeRoute(e){offPlays[currOffPlay][e.id]=e.value,routes(offPlays[currOffPlay])}function routes(e){if(!e)return;ctx.clearRect(0,0,document.getElementById("routeCanvas").width,document.getElementById("routeCanvas").height);for(let t of["first","second","third"])""!=e[t]&&null!=e[t]&&(document.getElementById(`${e[t]}o`).value=t);let t={wr1r:50,wr2r:450,ter:350};ctx.strokeStyle="red",ctx.fillStyle="red",ctx.lineWidth=3;for(let l of["wr1r","wr2r","ter"])if(""!=e[l]&&null!=e[l]){if(document.getElementById(l).value=e[l],ctx.beginPath(),ctx.moveTo(200,t[l]),"slant"==e[l]?ctx.lineTo(400,t[l]):"go"==e[l]?ctx.lineTo(1e3,t[l]):ctx.lineTo(700,t[l]),"post"==e[l]||"corner"==e[l]){let n=200;("post"==e[l]&&t[l]>250||"corner"==e[l]&&t[l]<250)&&(n*=-1),ctx.lineTo(900,t[l]+n)}else if("slant"==e[l])t[l]>250?ctx.lineTo(500,t[l]-170):ctx.lineTo(500,t[l]+170);else if("out"==e[l]||"in"==e[l]){let n=200;("in"==e[l]&&t[l]>250||"out"==e[l]&&t[l]<250)&&(n*=-1),ctx.lineTo(700,t[l]+n)}ctx.stroke(),ctx.closePath()}else document.getElementById(l).selectedIndex=0}function changeRead(e){let t=["wr1o","wr2o","teo"],l={first:!1,second:!1,third:!1};for(let e of t)l[document.getElementById(e).value]=!0;for(let e in l)if(0==l[e]){var n=e;break}for(let l of t){let t=document.getElementById(l);if(t.value==e.value&&t!=e){t.value=n;break}}}function toPass(e){document.getElementById("playsName").style.display="block",document.getElementById("playsName").value=e.name;for(let e of document.getElementsByClassName("passSpot"))e.classList.remove("hide");routes(e)}function fromPass(){document.getElementById("playsName").style.display="none";for(let e of document.getElementsByClassName("passSpot"))e.classList.add("hide");ctx.clearRect(0,0,document.getElementById("routeCanvas").width,document.getElementById("routeCanvas").height)}function updatePlayName(e){offPlays[currOffPlay]&&(e.length>10&&(e=e.substring(0,10),document.getElementById("playsName").value=e),offPlays[currOffPlay].name=e)}function save(){let e=["1s","1m","1l","1e","2s","2m","2l","2e","3s","3m","3l","3e","4s","4m","4l","4e","2p"],t={};for(let l of e)t[l]=document.getElementById(`call${l}`).value;var l={};for(let e of["SFG","LFG","PAT","KICK","RET","PUNTRET","PUNT"]){let t=document.getElementById(`call${e}`).value;"SFG"==e?l.fg={k:t}:"LFG"==e?l.longFg={k:t}:"PAT"==e?l.pat={k:t}:"KICK"==e?l.kickoff={k:t}:"RET"==e?l.return={rb:t}:"PUNTRET"==e?l.puntReturn={rb:t}:l.punt={p:t}}ws.mail({method:"savePlays",off:offPlays,def:defPlays,spe:l,cases:t})}function unfreeze(e){let t=e.parentElement.parentElement;t.classList.toggle("hide"),t.nextElementSibling.classList.toggle("hide")}function upgrade(e){let t=e.parentElement.parentElement;t.classList.toggle("hide"),t.nextElementSibling.nextElementSibling.classList.toggle("hide")}function cancelFreeze(e){let t=e.parentElement;t.classList.toggle("hide"),t.previousElementSibling.classList.toggle("hide")}function cancelUpgrade(e){let t=e.parentElement;t.classList.toggle("hide"),t.previousElementSibling.previousElementSibling.classList.toggle("hide")}function upgradeDelegate(e){let t=Number(e.parentElement.parentElement.getAttribute("data-index"));cancelUpgrade(e),ws.mail({method:"upgradeDelegate",index:t})}function unfreezeDelegate(e){let t=Number(e.parentElement.parentElement.getAttribute("data-index"));cancelFreeze(e),ws.mail({method:"unfreezeDelegate",index:t})}function updateDelegate(e){let t=document.getElementById(`dele${e.i}`);t.querySelector(".deleInv").textContent=e.render,t.querySelector(".deleLvl").textContent=e.level,t.querySelector(".deleTime").textContent=e.timeout,t.querySelector(".askUnfreeze").textContent=`Unfreeze agent for ${e.bail} against the cap?`;let l=e.level+1;l=l>5?5:l,t.querySelector(".askUpgrade").textContent=`Upgrade agent to level ${l} for $25K?`,1==e.frozen?(t.querySelector(".freezeBtn").style.display="block",document.getElementById(`negoDele${e.i}`).style.display="none",document.getElementById(`negoDele${e.i}`).querySelector("input").checked=!1):(t.querySelector(".freezeBtn").style.display="none",document.getElementById(`negoDele${e.i}`).style.display="block"),document.getElementById(`negoDele${e.i}`).querySelector(".deleDesc").textContent=`Delegate ${e.i+1} (Level ${e.level})`,e.level>=5?t.querySelector(".upgradeBtn").style.display="none":t.querySelector(".upgradeBtn").style.display="block"}var timeouts={};function custom(e,t,l){let n=document.getElementById(`${t}Error`);if("hide"==e)return n.style.display="none";n.style.display="block",n.textContent=e,n.style.backgroundColor=l?"var(--green)":"var(--pink)",timeouts[t]&&clearTimeout(timeouts[t]),timeouts[t]=setTimeout(function(){n.style.display="none"},3e3)}function getPlayer(e){if(!fullRoster)throw"No roster";for(let t of fullRoster)if(t.id==e)return t}function power(e){return 1.5/Math.log(5)*Math.log(e)+.5}function showGridPage(e){var t=document.getElementsByClassName("gridPage");for(let e of t)e.style.display="none";t[e].style.display="grid"}function renderPlayerRow(e,t,l,n,a){let o=buildElem("DIV",["playerRow","sortRow"],void 0,t);o.id=`player${e.id}`,o.setAttribute("data-id",e.id),o.setAttribute("data-ws",e.ws),o.setAttribute("data-ego",e.ego),o.setAttribute("data-pos",e.pos),o.setAttribute("data-team",e.team),o.setAttribute("data-able",e.draftable),o.setAttribute("data-base",e.base),o.setAttribute("data-guar",e.guar),o.setAttribute("data-name",e.fName+" "+e.lName),o.setAttribute("data-stat1",e.stat1.m),o.setAttribute("data-stat2",e.stat2.m),o.setAttribute("data-stat3",e.stat3.m),o.setAttribute("data-stat4",e.stat4.m);let r=buildElem("DIV","playerTop",void 0,o);r.innerHTML=l?`${e.fName} ${e.lName}&nbsp;<span class="num">(${e.pos} #${e.id})`:`<img src="logos/${e.clean}_g.png"> ${e.fName} ${e.lName}&nbsp;<span class="num">(${e.pos} #${e.id})</span>&nbsp;${decodeEntities("&middot;")}&nbsp;${e.mascot}`;let d=buildElem("SVG",void 0,"0 0 24 24",r);buildElem("PATH",void 0,"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",d),d.addEventListener("click",function(){this.parentElement.nextElementSibling.classList.toggle("show")});let s=buildElem("DIV","playerBot",void 0,o);buildElem("DIV",["playerCell","wide"],"Player Stats",s),buildElem("DIV","playerCell","Name",s),buildElem("DIV","playerCell","Mean",s),buildElem("DIV","playerCell",void 0,s).innerHTML='<abbr title="Standard Deviation">Std. Dev.</abbr>',buildElem("DIV","playerCell","Rank",s);for(let t of[e.stat1,e.stat2,e.stat3,e.stat4]){buildElem("DIV","playerCell",void 0,s).innerHTML=t.h,buildElem("DIV","playerCell",t.m,s),buildElem("DIV","playerCell",t.s,s);let e=buildElem("DIV","playerCell",void 0,s);buildElem("DIV",["ranking",t.r.cls],t.r.abbr,e).title=t.r.name}if(buildElem("DIV",["playerCell","wide"],"Player Contract",s),buildElem("DIV","playerCell","Base:",s),buildElem("DIV","playerCell",renderAmount(e.base),s),buildElem("DIV","playerCell","Guaranteed:",s),buildElem("DIV","playerCell",renderAmount(e.guar),s),buildElem("DIV","playerCell","Cap Hit:",s),buildElem("DIV","playerCell",renderAmount(e.salary),s),buildElem("DIV","playerCell","Week Signed:",s),buildElem("DIV","playerCell",renderAmount(e.weekSigned),s),buildElem("DIV","playerCell","Drafted:",s),buildElem("DIV","playerCell",numToEng(e.drafted),s),buildElem("DIV","playerCell","Draftable:",s),buildElem("DIV","playerCell",numToEng(e.draftable),s),l)return;buildElem("DIV","playerCell","Ego:",s),buildElem("DIV","playerCell",e.ego,s),buildElem("DIV","playerCell","Team:",s),buildElem("DIV","playerCell",e.mascot,s);let i=buildElem("DIV","playerActionCont",void 0,s);if(e.team==document.body.getAttribute("data-abbr")){if(a){buildElem("BUTTON",["playerAction","nego"],"Renegotiate",i).addEventListener("click",function(){negotiate(this)})}buildElem("BUTTON",["playerAction","release"],"Release",i).addEventListener("click",function(){release(this)})}else if("UFA"!=e.team&&n){buildElem("BUTTON",["playerAction","inquire"],"Inquire",i).addEventListener("click",function(){inquire(this)}),buildElem("BUTTON",["playerAction","trade"],"Offer Trade",i).addEventListener("click",function(){offerPlayerTrade(this)})}else if(!e.draftable&&a){buildElem("BUTTON",["playerAction","sign"],"Sign Player",i).addEventListener("click",function(){negotiate(this)})}}function matchingPos(e,t){let l=[],n=e.charAt(0);for(let e of t){let t=e.charAt(0);t==n?l.push(e):["3","2"].includes(t)&&["3","2"].includes(n)?l.push(e):["5","6"].includes(t)&&["5","6"].includes(n)?l.push(e):["A","B","C"].includes(t)&&["A","B","C"].includes(n)&&l.push(e)}return l}function renderAmount(e){if("string"==typeof e)try{e=Number(e)}catch{return`<${e}>`}return isNaN(e)?`<${e}>`:(e=Math.round(e))<=-1e3?`$(${Math.abs(e/1e3)}M)`:e<0?`$(${Math.abs(e)}K)`:0==e?"$0":e<1e3?`$${e}K`:`$${e/1e3}M`}function numToEng(e){return 0==e?"No":1==e?"Yes":`<${e}>`}var attrs={QB:[{js:"acc",ln:"Accuracy",sn:"Acc.",m:.87,d:.12},{js:"longAcc",ln:"Long Accuracy",sn:"Long Acc.",m:.77,d:.12},{js:"pressPen",ln:"Pressure Penalty",sn:"Press. Pen.",m:.09,d:.06,flip:!0},{js:"passDelay",ln:"Throw Delay",sn:"Delay",m:4,d:3,flip:!0}],RB:[{js:"elus",ln:"Elusiveness",sn:"Elus.",m:.75,d:.12},{js:"block",ln:"Run Blocking",sn:"Run Block",m:0,d:3},{js:"puntReturn",ln:"Punt Return Distance",sn:"Punt Ret.",m:0,d:3},{js:"speed",ln:"Speed",sn:"Speed",m:5,d:1.5}],WR:[{js:"recep",ln:"Reception Rate",sn:"Recep.",m:.9,d:.6},{js:"longRecep",ln:"Long Reception Rate",sn:"Long Recep.",m:.8,d:.6},{js:"elus",ln:"Elusiveness",sn:"Elus.",m:0,d:3},{js:"speed",ln:"Speed",sn:"Speed",m:5,d:1.5}],TE:[{js:"recep",ln:"Reception Rate",sn:"Recep.",m:.9,d:.6},{js:"longRecep",ln:"Long Reception Rate",sn:"Long Recep.",m:.8,d:.6},{js:"elus",ln:"Elusiveness",sn:"Elus.",m:0,d:3},{js:"speed",ln:"Speed",sn:"Speed",m:5,d:1.5}],OL:[{js:"stuff",ln:"Stuff Rate",sn:"Stuff",m:.3,d:.12},{js:"holding",ln:"Holding Rate",sn:"Holding",m:0,d:3,flip:!0},{js:"sackAv",ln:"Sack Avoidance",sn:"Sack Avoid.",m:0,d:3},{js:"speed",ln:"Speed",sn:"Speed",m:2,d:1.5}],DL:[{js:"escape",ln:"Escape Rate",sn:"Escape",m:.3,d:.12},{js:"pressPerc",ln:"Pressure Percentage",sn:"Pressure Perc.",m:0,d:3},{js:"tackle",ln:"Tackle Rate",sn:"Tackle",m:.5,d:.12},{js:"speed",ln:"Speed",sn:"Speed",m:2,d:1.5}],LB:[{js:"escape",ln:"Escape Rate",sn:"Escape",m:.3,d:.12},{js:"pressPerc",ln:"Pressure Percentage",sn:"Pressure Perc.",m:0,d:3},{js:"tackle",ln:"Tackle Rate",sn:"Tackle",m:.5,d:.12},{js:"speed",ln:"Speed",sn:"Speed",m:2,d:1.5}],CB:[{js:"cover",ln:"Cover Rate",sn:"Cover",m:.9,d:.6},{js:"int",ln:"Interception Rate",sn:"Int.",m:.05,d:.03},{js:"tackle",ln:"Tackle Rate",sn:"Tackle",m:.7,d:.12},{js:"speed",ln:"Speed",sn:"Speed",m:4,d:1.5}],S:[{js:"cover",ln:"Cover Rate",sn:"Cover",m:.9,d:.6},{js:"int",ln:"Interception Rate",sn:"Int.",m:.05,d:.03},{js:"tackle",ln:"Tackle Rate",sn:"Tackle",m:.7,d:.12},{js:"speed",ln:"Speed",sn:"Speed",m:4,d:1.5}],K:[{js:"pat",ln:"Point After Touchdown",sn:"PAT",m:.95,d:.06},{js:"fg",ln:"Field Goal",sn:"FG",m:.9,d:.06},{js:"longFg",ln:"Long Field Goal",sn:"Long FG",m:.8,d:.06},{js:"touchback",ln:"Touchback Rate",sn:"Touchback",m:.8,d:.12}],P:[{js:"dist",ln:"Distance",sn:"Dist.",m:40,d:6},{js:"aware",ln:"Awareness",sn:"Aware.",m:.3,d:.06},{js:"blocked",ln:"Blocked Rate",sn:"Block",m:.01,d:.003,flip:!0},{js:"oob",ln:"Out of Bounds",sn:"OOB",m:.2,d:.06,flip:!0}]};
