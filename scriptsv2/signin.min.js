var factorTemp,actTemp;function signIn(){var e=document.getElementById("mainUser").value,t=document.getElementById("mainPass").value;ws.mail({method:"signIn",username:e,password:t})}function checkCode(e){if(6==e.length){let t={method:"signIn2fa",code:e,temp:factorTemp,username:document.getElementById("mainUser").value};ws.mail(t)}}function activate(){let e={method:"activate"};e.mascot=document.getElementById("actUser").value,e.code=document.getElementById("actCode").value,ws.mail(e)}function checkValid(){var e=document.getElementById("setPass").value,t=document.getElementById("conPass").value,a=document.getElementById("setError"),n=!1;return e.length<12?(a.textContent="Your password must be at least 12 characters",n=!0):e!=t&&""!=t&&(a.textContent="The passwords must match",n=!0),n?(a.style.display="block",!1):(a.style.display="none",!0)}function setPassword(){if(!checkValid())return error("Password is not valid");let e={method:"setPassword"};e.username=document.getElementById("actUser").value,e.password=document.getElementById("conPass").value,e.temp=actTemp,ws.mail(e)}function recover(){let e=document.getElementById("mainUser").value;""!=e?(document.getElementById("recUser").value=e,toPage("page",void 0,5)):toPage("page",void 0,4)}function checkUname(){document.getElementById("recUser").value.length>3&&toPage("page",void 0,5)}function email(){ws.mail({method:"sendEmail",username:document.getElementById("recUser").value})}function checkEmailCode(e){if(6==e.length){let t={method:"checkEmailCode",code:e,username:document.getElementById("recUser").value};ws.mail(t)}}function recoverCode(){let e={method:"checkRecoCode",code:document.getElementById("recoCode").value,username:document.getElementById("recUser").value};ws.mail(e)}window.onload=(()=>{let e=0;setInterval(()=>{document.getElementsByTagName("main")[0].style.backgroundPosition=`${e-=.5}px 0px`},20)}),window.addEventListener("dark",()=>{let e=document.getElementsByTagName("main")[0],t=e.style.backgroundImage;-1!=t.indexOf("_dark")?e.style.backgroundImage=t.replace("_dark",""):e.style.backgroundImage=t.replace(".png","_dark.png")}),ws.onmessage=(e=>{var t=JSON.parse(e.data);if("signedIn"==t.method)document.cookie=`token=${t.token}`,location.reload();else if("error"==t.method){if("505"==t.type)return location.reload(),!1;error(t.text)}else"prompt2fa"==t.method?(toPage("page",void 0,1),factorTemp=t.temp,document.getElementById("2faCode").focus()):"activated"==t.method?(toPage("page",void 0,3),actTemp=t.temp,document.getElementById("setPass").focus()):"sentEmail"==t.method&&(toPage("page",void 0,6),document.getElementById("emailMess").textContent=`A code was sent to ${t.star}`,document.getElementById("emailCode").focus(),setTimeout(()=>{document.getElementById("resend").style.display="block"},12e4))});