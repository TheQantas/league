ws.onmessage=(e=>{var t=JSON.parse(e.data);"number"==typeof t.spec?byWeek[t.spec]=t.data:byTeam[t.spec]=t.data,renderGames(t.data)}),window.onresize=(()=>{document.getElementById("sideGame").style.display="none"}),window.addEventListener("dark",()=>{updateImage(document.getElementById("logoCont").children[0])},!1);var byWeek=[],byTeam={};function changeMethod(e){document.getElementById("sideGame").style.display="none",e.parentElement.children[Number(e.value)+1].style.display="block",e.parentElement.children[1-Number(e.value)+1].style.display="none",e.parentElement.children[1-Number(e.value)+1].selectedIndex=0}function getWeek(e){if(document.getElementById("sideGame").style.display="none",e>20||0==e){document.getElementById("logoCont").style.display="flex";var t="images/";t+=0==e?"preseason":21==e?"wildcard":22==e?"divisional":23==e?"conference":"championship","true"==getCookie("dark")&&(t+="_dark"),t+=".png",document.getElementById("logoCont").children[0].src=t}else document.getElementById("logoCont").style.display="none";if(byWeek[e])return renderGames(byWeek[e]);ws.mail({method:"requestGames",type:"games",spec:Number(e)})}function getTeam(e){if(document.getElementById("logoCont").style.display="none",document.getElementById("sideGame").style.display="none",byTeam[e])return renderGames(byTeam[e]);ws.mail({method:"requestGames",type:"games",spec:e})}function renderGames(e){var t=document.getElementById("gameCont"),a=t.children.length;for(let e=1;e<a;e++)t.children[1].remove();for(let t of e){let e=buildElem("DIV","gameCell",void 0,document.getElementById("gameCont"));e.addEventListener("click",function(){showDetails(this)}),e.setAttribute("data-stats",t.stats),e.setAttribute("data-away",t.awayMascot),e.setAttribute("data-home",t.homeMascot),e.setAttribute("data-awaysbq",t.awaySbq),e.setAttribute("data-homesbq",t.homeSbq),e.setAttribute("data-status",t.status);let a,s,o=new Date(t.schedule);0==o.getHours()?(a=12,s="A"):o.getHours()<12?(a=o.getHours(),s="A"):12==o.getHours()?(a=12,s="P"):(a=o.getHours()-12,s="P");let l=`${numToDay(o.getDay()).toUpperCase()} ${o.getDate()} ${numToMonth(o.getMonth()).toUpperCase()} ${a}${s}`;t.primetime&&(e.classList.add("primetime"),l+=" - PRIMETIME"),buildElem("DIV","gameTop",l,e);let n,m,d=buildElem("DIV","gameBot",void 0,e);buildElem("IMG",void 0,`logos/${t.awayTeam}_g.png`,buildElem("DIV","gameBotCell",void 0,d)),buildElem("DIV","gameBotCell",t.awayMascot.toUpperCase(),d),n="upcoming"==t.status?buildElem("DIV","gameBotCell","-",d):buildElem("DIV","gameBotCell",t.awayScore,d),buildElem("IMG",void 0,`logos/${t.homeTeam}_g.png`,buildElem("DIV","gameBotCell",void 0,d)),buildElem("DIV","gameBotCell",t.homeMascot.toUpperCase(),d),m="upcoming"==t.status?buildElem("DIV","gameBotCell","-",d):buildElem("DIV","gameBotCell",t.homeScore,d),-1!=t.status.indexOf("FINAL")&&(t.awayScore>t.homeScore?n.style.fontWeight="bold":t.awayScore<t.homeScore&&(m.style.fontWeight="bold"))}}function showDetails(e){sideBox(e,"sideGame"),document.getElementById("sideGame").offsetWidth<600?(document.getElementById("sideRight").style.display="none",document.getElementById("sideLeft").style.width="calc(100% - 40px)"):(document.getElementById("sideRight").style.display="block",document.getElementById("sideLeft").style.width="calc(50% - 20px)");var t=JSON.parse(e.getAttribute("data-awaysbq")),a=JSON.parse(e.getAttribute("data-homesbq")),s=document.getElementById("gameTable");s.innerHTML="";var o=s.insertRow(),l=s.insertRow(),n=s.insertRow(),m=["Team"],d=[e.getAttribute("data-away")],i=[e.getAttribute("data-home")],r=0,u=0;for(let s=0;s<t.length;s++)"upcoming"==e.getAttribute("data-status")?(d.push("-"),i.push("-")):(d.push(t[s]),i.push(a[s]),r+=t[s],u+=a[s]),m.push(getPeriod(s));m.push("T"),"upcoming"!=e.getAttribute("data-status")?(d.push(r),i.push(u)):(d.push("-"),i.push("-"));for(let e=0;e<m.length;e++){o.insertCell().textContent=m[e],l.insertCell().textContent=d[e],n.insertCell().textContent=i[e]}var y=JSON.parse(e.getAttribute("data-stats"));document.getElementsByClassName("sideNum")[0].textContent=y.awayOff,document.getElementsByClassName("sideNum")[1].textContent=y.homeOff,document.getElementsByClassName("sideNum")[2].textContent=y.awayDef,document.getElementsByClassName("sideNum")[3].textContent=y.homeDef,document.getElementsByClassName("sideNum")[4].textContent=y.awayYpp,document.getElementsByClassName("sideNum")[5].textContent=y.homeYpp;for(let e in y)y[e]=Number(y[e]);if(y.awayOff+y.homeOff==0)var p=50;else p=y.awayOff/(y.awayOff+y.homeOff)*100;if(y.awayDef+y.homeDef==0)var f=50;else f=y.awayDef/(y.awayDef+y.homeDef)*100;if(y.awayYpp+y.homeYpp==0)var g=50;else g=y.awayYpp/(y.awayYpp+y.homeYpp)*100;document.getElementsByClassName("sideBar")[0].style.width=`calc(${p}% - 4px)`,document.getElementsByClassName("sideBar")[2].style.width=`calc(${f}% - 4px)`,document.getElementsByClassName("sideBar")[4].style.width=`calc(${g}% - 4px)`;let c=e.getAttribute("data-away").toLowerCase().replace(/\s/g,""),h=e.getAttribute("data-home").toLowerCase().replace(/\s/g,"");for(let e=0;e<6;e+=2)document.getElementsByClassName("sideBar")[e].className=`sideBar ${c}`;for(let e=1;e<6;e+=2)document.getElementsByClassName("sideBar")[e].className=`sideBar ${h}`}function sideBox(e,t){var a=e.offsetWidth,s=document.getElementById(t);if(e.parentElement.offsetWidth<=a+10)var o=a;else o=2*a;var l=e.offsetHeight,n=e.offsetLeft,m=e.parentElement.offsetWidth-e.offsetLeft-e.offsetWidth,d=e.parentElement.offsetHeight-e.offsetTop-e.offsetHeight;m>=o?(s.style.left=`${e.offsetLeft+a}px`,s.style.top=`${e.offsetTop}px`):n>=o?(s.style.left=`${e.offsetLeft-o}px`,s.style.top=`${e.offsetTop}px`):d>=l?(s.style.left=n>=o?`${e.offsetLeft}px`:"0px",s.style.top=`${e.offsetTop+e.offsetHeight}px`):(s.style.left=n>=o?`${e.offsetLeft}px`:"0px",s.style.top=`${e.offsetTop-e.offsetHeight}px`),s.style.width=`${o}px`,s.style.height=`${l}px`,s.style.display="block"}